"use strict";$(document).ready(function(){function o(){g.load.image("carl","assets/pj/carl.ico"),g.load.image("ground","assets/background/ground.png"),g.load.image("sky","assets/background/cloud.jpg"),g.load.image("ball","assets/balls/pangball.png"),g.load.audiosprite("sfx","assets/audio/fx_mixdown.ogg",null,audioJSON)}function e(){m=g.add.audioSprite("sfx"),g.physics.startSystem(Phaser.Physics.ARCADE),p=g.add.sprite(0,0,"sky"),r=g.add.group(),r.enableBody=!0,n=g.add.text(16,16,"Score: "+h,{fontSize:"32px",fill:"#000"});var o=r.add(g.add.tileSprite(0,g.world.height-55,g.world.width,55,"ground"));o.body.immovable=!0;var e=r.add(g.add.tileSprite(0,-49,g.world.width,55,"ground"));e.body.immovable=!0;var a=r.add(g.add.tileSprite(400,g.world.height-200,110,55,"ground"));a.body.immovable=!0;var t=r.add(g.add.tileSprite(-103,0,110,g.world.height,"ground"));t.body.immovable=!0;var l=r.add(g.add.tileSprite(g.world.width-7,0,110,g.world.height,"ground"));l.body.immovable=!0,s=g.add.sprite(200,0,"carl"),s.scale.setTo(2,2),g.physics.arcade.enable(s),d(),s.body.bounce.y=.1,s.body.gravity.y=700,s.immovable=!0,c=g.add.text(630,16,"Time: "+v,{fontSize:"32px",fill:"#000"}),g.time.events.loop(Phaser.Timer.SECOND,i,this)}function d(){b=g.add.sprite(100,240,"ball"),u=g.add.sprite(600,240,"ball"),b.scale.setTo(2.5,2.5),u.scale.setTo(2.5,2.5),g.physics.enable([b,u]),b.body.setCircle(16),u.body.setCircle(16),b.body.collideWorldBounds=!0,u.body.collideWorldBounds=!0,b.body.bounce.set(1),u.body.bounce.set(1),b.body.gravity.y=100,u.body.gravity.y=100,b.body.velocity.set(150),u.body.velocity.set(-200,60)}function a(){h+=10,n.text="Score: "+h}function t(){var o=g.input.keyboard.createCursorKeys();g.physics.arcade.collide(s,r),s.body.velocity.x=0,g.physics.arcade.collide(s,b,l,null,this),g.physics.arcade.collide(s,u,l,null,this),g.physics.arcade.collide(b,u),o.left.isDown?(s.body.velocity.x=-300,s.animations.play("left")):o.right.isDown?(s.body.velocity.x=300,s.animations.play("right")):(s.animations.stop(),s.frame=10),o.up.isDown&&s.body.touching.down&&(s.body.velocity.y=-500,a(s),m.play("numkey"))}function i(){v<=0?y=g.add.text(200,250,"Time is over!",{fontSize:"64px",fill:"#000"}):f===!1&&(v--,c.text="Time: "+v)}function l(o,e){0===w&&(console.log("End Game"),b.body.bounce.setTo(0,0),u.body.bounce.setTo(0,0),p.destroy(),g.stage.backgroundColor="#992d2d",w++,y=g.add.text(200,250,"Game over!",{fontSize:"64px",fill:"#000"}),f=!0)}var s,r,n,c,y,p,b,u,m,g=new Phaser.Game(800,600,Phaser.CANVAS,"ff-superball",{preload:o,create:e,update:t}),h=0,v=10,f=!1,w=0});var audioJSON={spritemap:{"alien death":{start:1,end:2,loop:!1},"boss hit":{start:3,end:3.5,loop:!1},escape:{start:4,end:7.2,loop:!1},meow:{start:8,end:8.5,loop:!1},numkey:{start:9,end:9.1,loop:!1},ping:{start:10,end:11,loop:!1},death:{start:12,end:16.2,loop:!1},shot:{start:17,end:18,loop:!1},squit:{start:19,end:19.3,loop:!1}}};